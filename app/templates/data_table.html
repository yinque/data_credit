{% extends "base.html" %}
{% import "_macros.html" as macros %}
{% block head %}
    {{ super() }}
    <script src="{{ url_for("static",filename="assets/js/manage.js") }}"></script>
    <script src="{{ url_for("static",filename="assets/js/pagination.js") }}"></script>
{% endblock %}
{% block navigate_datas %}class="active"{% endblock %}
{% block context %}
    <!-- 内容区域 -->
    <div class="tpl-content-wrapper">
        <div class="row-content am-cf">
            <div class="row">
                <div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
                    <div class="widget am-cf">
                        <div class="widget-head am-cf">
                            <div class="widget-title am-fl">原始数据查看</div>
                        </div>
                        <div class="widget-body  widget-body-lg am-fr">
                            <div class="screen-div">
                                <span>起始时间：</span>
                                <input type="text" placeholder="--请输入--" id="trains_start">
                                <span>终止时间：</span>
                                <input type="text" placeholder="--请输入--" id="trains_end">
                                <a class="screen-btn" id="data_btn" href="javascript:;">搜索</a>
                            </div>
                            <table width="100%" class="am-table am-table-compact am-table-striped tpl-table-black "
                                   id="example_r">
                                <thead class="t-thead">
                                <tr>
                                    <th>时间</th>
                                    {% for x in p_types %}
                                        <th>{{ x.name }}({{ x.unit }})</th>
                                    {% endfor %}
                                </tr>
                                </thead>
                                <tbody class="table-content">
                                {#                                <div id="trains_iterms"></div>#}
                                </tbody>
                            </table>

                            <div class="am-fr">
                                <div class="am-pagination tpl-pagination">
                                    <div id="data_widget"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    {{ super() }}
    <script type="text/javascript">
        var para_type = ['时间' {% for x in p_types %}, '{{ x.name }}'{% endfor %}];
        pag = new Pagination('/data_table_result', para_type, 'example_r', 'data_widget', 'pag',false,"#FF0000");
        pag.turnPage(1);
        $("#data_btn").click(function () {
            var data_start = $("#trains_start").val();
            var data_end = $("#trains_end").val();
            if (data_start == '' || data_end == '') {
                alert("请输入正确的时间段！")
            } else {
                pag.setData({'start_time': data_start, 'end_time': data_end})
                pag.turnPage(1)
            }
        });
    </script>
{% endblock %}